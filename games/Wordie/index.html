<style>
  body {
    margin: 0;
    overscroll-behavior: none; /* Disable Chrome two fingers back/forward swipe */
    user-select: none;  /* Prevent accidental selection while dragging mouse */

    font-family: sans-serif;
  }

  .board {
    display: table;
    border-spacing: 4px;
  }

  .guess {
    display: table-row;
  }

  .letter {
    display: table-cell;
    border: 2px solid black;
    width: 48px;
    height: 48px;
    font-family: sans-serif;
    font-weight: bold;
    font-size: 32px;
    text-align: center;
    vertical-align: middle;
    text-transform: uppercase;
  }

  .alphabet {
    border-spacing: 2px;
  }

  .alpha-row {
    display: table-row;
  }
  
  .wrong {
    background-color: gray;
    color: white;
  }
  .partial {
    background-color: olive;
    color: white;
  }
  .correct {
    background-color: green;
    color: white;
  }

</style>

<body>
  <h1>Wordie</h1>
</body>

<script>

  const MAX_GUESSES = 6;
  const NUM_LETTERS = 5;

  const Guess = { Wrong: 'wrong', Partial: 'partial', Correct: 'correct' };

  class Board {
    answer;
    div;

    #guessIndex = 0;
    #letterIndex = 0;

    constructor( answer ) {
      this.answer = answer;

      this.div = document.createElement( 'div' );
      this.div.className = 'board';

      for ( let g = 0; g < MAX_GUESSES; g ++ ) {
        const guess = document.createElement( 'div' );
        guess.className = 'guess';

        for ( let l = 0; l < NUM_LETTERS; l ++ ) {
          const letter = document.createElement( 'div' );
          letter.className = 'letter';
          guess.appendChild( letter );
        }

        this.div.appendChild( guess );
      }
    }

    addLetter( letter ) {
      if ( this.#letterIndex < NUM_LETTERS ) {
        const letterDiv = this.div.children[ this.#guessIndex ].children[ this.#letterIndex ];
        letterDiv.textContent = letter;
        this.#letterIndex ++;
      }
    }

    clearLetter() {
      if ( 0 < this.#letterIndex ) {
        this.#letterIndex --;
        const letterDiv = this.div.children[ this.#guessIndex ].children[ this.#letterIndex ];
        letterDiv.textContent = '';
      }
    }

    applyGuess() {
      const guess = this.div.children[ this.#guessIndex ];

      for ( let i = 0; i < NUM_LETTERS; i ++ ) {
        const letterDiv = guess.children[ i ];
        const letter = letterDiv.textContent;

        if ( letter == this.answer[ i ] ) {
          letterDiv.classList.add( Guess.Correct );

          alphabet[ letter ].classList.remove( Guess.Partial );
          alphabet[ letter ].classList.add( Guess.Correct );
        }
        else if ( this.answer.includes( letter ) ) {
          letterDiv.classList.add( Guess.Partial );

          alphabet[ letter ].classList.remove( Guess.Correct );
          alphabet[ letter ].classList.add( Guess.Partial );
        }
        else {
          letterDiv.classList.add( Guess.Wrong );
          alphabet[ letter ].classList.add( Guess.Wrong );
        }
      }

      this.#guessIndex ++;
      this.#letterIndex = 0;
    }
  }

  const board = new Board( 'draws' );

  document.body.appendChild( board.div );

  const alphabet = createAlphabet();

  const clearButton = document.createElement( 'div' );
  clearButton.className = 'letter';
  clearButton.innerHTML = '&nbsp;Clear&nbsp;'
  clearButton.onclick = () => board.clearLetter();
  document.body.appendChild( clearButton );

  const applyButton = document.createElement( 'div' );
  applyButton.className = 'letter';
  applyButton.innerHTML = '&nbsp;Guess&nbsp;'
  applyButton.onclick = () => board.applyGuess();
  document.body.appendChild( applyButton );

  document.onkeydown = ( e ) => {
    if ( e.key.length == 1 && /[a-z]/i.test( e.key ) ) {
      board.addLetter( e.key );
    }
    else if ( e.key == 'Backspace' ) {
      board.clearLetter();
    }
    else if ( e.key == 'Enter' ) {
      board.applyGuess();
    }
  }

  function createAlphabet() {
    const alphabet = {};

    const alphabetDiv = document.createElement( 'div' );
    alphabetDiv.className = 'alphabet';

    for ( let row = 0; row < 2; row ++ ) {
      const alphaRowDiv = document.createElement( 'div' );
      alphaRowDiv.className = 'alpha-row';

      for ( let col = 0; col < 13; col ++ ) {
        const letter = String.fromCharCode( 'a'.charCodeAt( 0 ) + row * 13 + col );

        const letterDiv = document.createElement( 'div' );
        letterDiv.className = 'letter';
        letterDiv.textContent = letter;
        letterDiv.onclick = () => board.addLetter( letter );

        alphabet[ letter ] = letterDiv;

        alphaRowDiv.appendChild( letterDiv );
      }
      
      alphabetDiv.appendChild( alphaRowDiv );
    }

    document.body.appendChild( alphabetDiv );

    return alphabet;
  }

</script>